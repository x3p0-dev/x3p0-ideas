////
/// Button block CSS.
///
/// @author Justin Tadlock <justintadlock@gmail.com>
/// @link   https://github.com/x3p0-dev/x3p0-ideas
////

@use '../../tools/icon';
@use '../../tools/inline-icon';

// -----------------------------------------------------------------------------
// Block fixes.
// -----------------------------------------------------------------------------

///
/// Make sure the link inherits user typography settings.
///
/// @todo Maybe remove. Is this still needed?
///
.wp-block-button[style*=font-weight] .wp-block-button__link { font-weight: inherit; }
.wp-block-button[style*=font-style] .wp-block-button__link { font-style: inherit; }

// -----------------------------------------------------------------------------
// Block customizations.
// -----------------------------------------------------------------------------

///
/// Handles styles for elements inside of the Button block.
///
/// Note: both classes are needed to overwrite styles in the editor.
///
.wp-block-button .wp-block-button__link {
	code,
	kbd {
		border-color: currentColor;
		background: transparent;
		color: inherit;
		opacity: 0.7;
		text-decoration: none;
		font-weight: 400;
		font-size: smaller;
	}

	del, s {
		opacity: 0.7;
		color: currentColor;
		text-decoration-color: currentColor;
	}

	ins {
		border: none;
		background: inherit;
		color: inherit;
		text-decoration: underline;
	}
}

// -----------------------------------------------------------------------------
// Block style variations.
// -----------------------------------------------------------------------------

///
/// Elevated style.
///
/// Handles interactive states since these are not currently supported via JSON,
/// following a LVHFA model.
///
/// @link https://github.com/WordPress/gutenberg/issues/55359
///
:root :where(.is-style-button-elevated .wp-block-button__link) {

	&:is(:hover, :focus, :active) {
		background:   var(--wp--custom--color--button--elevated--background-interact);
		color:        var(--wp--custom--color--button--elevated--foreground);
		border-color: var(--wp--custom--color--button--elevated--border-interact);
		box-shadow:   var(--wp--custom--shadow--button--elevated--interact);
	}

	&:is(:focus, :active) {
		outline-color: var(--wp--custom--color--button--elevated--outline-focus);
	}
}

///
/// Tonal style.
///
/// Handles interactive states since these are not currently supported via JSON,
/// following a LVHFA model.
///
/// @link https://github.com/WordPress/gutenberg/issues/55359
///
:root :where(.is-style-button-tonal .wp-block-button__link) {

	&:is(:hover, :focus, :active) {
		background:   var(--wp--custom--color--button--tonal--background-interact);
		color:        var(--wp--custom--color--button--tonal--foreground);
		border-color: var(--wp--custom--color--button--tonal--border-interact);
		box-shadow:   var(--wp--custom--shadow--button--tonal--interact);
	}

	&:is(:focus, :active) {
		outline-color: var(--wp--custom--color--button--tonal--outline-focus);
	}
}

///
/// Outlined style.
///
/// Handles interactive states since these are not currently supported via JSON,
/// following a LVHFA model.
///
/// @link https://github.com/WordPress/gutenberg/issues/55359
///
:root :where(.is-style-button-outlined .wp-block-button__link) {

	&:is(:hover, :focus, :active) {
		color:        var(--wp--custom--color--button--outlined--foreground);
		border-color: var(--wp--custom--color--button--outlined--border-interact);
		box-shadow:   var(--wp--custom--shadow--button--outlined--interact);
	}

	&:is(:focus, :active) {
		outline-color: var(--wp--custom--color--button--outlined--outline-focus);
	}
}

// -----------------------------------------------------------------------------
// Block variations.
// -----------------------------------------------------------------------------

///
/// Color scheme block variation CSS.
///
/// Note that the editor renders a `<div>` element for the `<button>`.
///
.wp-block-button.toggle-color-scheme .wp-block-button__link {

	// When used in a nav menu, decrease the default spacing.
	.wp-block-navigation & {
		padding: var(--wp--preset--spacing--10) var(--wp--preset--spacing--40);
	}

	border-radius: var(--wp--preset--border-radius--full);

	// The default icon is for light mode, but we use the dark mode icon
	// when the dark color scheme is in use.
	@include inline-icon.prefix(icon.get-url('light-mode'));

	&.is-dark-scheme::before {
		@include inline-icon.modify(icon.get-url('dark-mode'));
	}
}

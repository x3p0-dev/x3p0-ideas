////
/// Separator block CSS.
///
/// @author    Justin Tadlock <justintadlock@gmail.com>
/// @copyright 2023 Justin Tadlock
/// @license   https://www.gnu.org/licenses/gpl-2.0.html GPL-2.0-or-later
/// @link      https://github.com/x3p0-dev/x3p0-ideas
////

// -----------------------------------------------------------------------------
// Block style variations.
// -----------------------------------------------------------------------------

// Note that we're specifically targeting `<hr>` so that custom styles the
// specificity battle in the editor. âš”ï¸
//
// Most of these need their background reset because WP sets both the `core`
// and `background` values for the block's color. All we need is the color,
// which WP automatically applies to the border via `currentColor`.

// Basic border-style variations.
hr.wp-block-separator:is(
	.is-style-dashed,
	.is-style-dotted,
	.is-style-double
) {
	border-width: var( --wp--preset--spacing--minus-3 ) 0 0;
	background-color: transparent !important;
}

hr.wp-block-separator.is-style-dashed { border-style: dashed; }
hr.wp-block-separator.is-style-dotted { border-style: dotted; }

hr.wp-block-separator.is-style-double {
	border-width: var( --wp--preset--spacing--minus-2 ) 0 0;
	border-style: double;
}

// Hand-drawn style.
hr.wp-block-separator.is-style-hand-drawn {
	margin-bottom: -20px !important;
	padding: var( --wp--preset--spacing--40 );
	border-width: var( --wp--preset--spacing--minus-2 ) 0 0;
	border-radius: 255px 15px 0 0/15px 4px 0 0 !important;

	// Don't kill the background for the icon style.
	&:where( :not( [class*=has-icon] ) ) {
		background: none !important;
	}
}

// -----------------------------------------------------------------------------
// Icon styles.
// -----------------------------------------------------------------------------

hr.wp-block-separator[class*=has-icon] {
	display: flex;
	justify-content: center;
	border: none;
	text-align: center;

	// Some characters get cut off. This ensures they are visible.
	overflow: visible;

	// Use `!important` to overrule core's use of the `background` shorthand
	// instead of the targeted property itself.
	background-color: transparent !important;
	background-repeat: repeat-x !important;
	background-position: 0% 50% !important;
	background-size: 100% 2px !important;

	// Don't use `!important` for the background image, which allows
	// background gradients to work.
	background-image: linear-gradient( 90deg, currentColor, currentColor );

	&.is-style-wide {
		background-size: 100% var( --wp--preset--spacing--minus-2 ) !important;
	}

	&.is-style-dashed {
		background-repeat: space no-repeat !important;
		background-size: 15% 2px!important;
	}

	&.is-style-dotted {
		background-repeat: space no-repeat !important;
		background-size: 2.2% 2px!important;
	}

	&.is-style-double {
		background-repeat: space !important;
		background-size: 100% 34% !important;
	}

	&.is-style-hand-drawn {
		background-position-y: top !important;
		background-size: 100% 6px !important;
	}

	&::before {
		font-variant-emoji: emoji;
		content: var( --hr-icon, "\2766" ); // floral heart default.
		padding: 0 0.5em;
		font-size: var( --wp--preset--font-size--xl );
		line-height: 1;
		background-color: var( --color-base, var( --wp--preset--color--base ) );
	}
}

.has-icon-â¦ { --hr-icon: "â¦"; } // floral heart
.has-icon-ğŸŒ¼ { --hr-icon: "ğŸŒ¼"; }
.has-icon-â˜€ï¸ { --hr-icon: "â˜€ï¸"; }
.has-icon-ğŸª¶ { --hr-icon: "ğŸª¶"; }
.has-icon-ğŸ”¥ { --hr-icon: "ğŸ”¥"; }
.has-icon-ğŸƒ { --hr-icon: "ğŸƒ"; }
.has-icon-â˜• { --hr-icon: "â˜•"; }
.has-icon-ğŸ» { --hr-icon: "ğŸ»"; }
.has-icon-ğŸª· { --hr-icon: "ğŸª·"; }
.has-icon-ğŸ«  { --hr-icon: "ğŸ« "; }
.has-icon-ğŸ¸ { --hr-icon: "ğŸ¸"; }
.has-icon-âœï¸  { --hr-icon: "âœï¸"; }
.has-icon-ğŸš€ { --hr-icon: "ğŸš€"; }
.has-icon-â˜˜ï¸  { --hr-icon: "â˜˜ï¸"; }
.has-icon-â­ { --hr-icon: "â­"; }
.has-icon-ğŸŒ» { --hr-icon: "ğŸŒ»"; }
.has-icon-â›±ï¸ { --hr-icon: "â›±ï¸"; }
